*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є 31.07.00             DOKLAD.SPR                15:40:21 є
*       є                                                         є
*       єДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДє
*       є                                                         є
*       є Author's Name                                           є
*       є                                                         є
*       є Copyright (c) 2000 Company Name                         є
*       є Address                                                 є
*       є City,     Zip                                           є
*       є                                                         є
*       є Description:                                            є
*       є This program was automatically generated by GENSCRN.    є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ


#REGION 0
REGIONAL m.currarea, m.talkstat, m.compstat

IF SET("TALK") = "ON"
	SET TALK OFF
	m.talkstat = "ON"
ELSE
	m.talkstat = "OFF"
ENDIF
m.compstat = SET("COMPATIBLE")
SET COMPATIBLE FOXPLUS

m.currarea = SELECT()


*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є                    Window definitions                   є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*

IF NOT WEXIST("_05x0xlbbp")
	DEFINE WINDOW _05x0xlbbp ;
		FROM INT((SROW()-20)/2),INT((SCOL()-33)/2) ;
		TO INT((SROW()-20)/2)+19,INT((SCOL()-33)/2)+32 ;
		NOFLOAT ;
		NOCLOSE ;
		SHADOW ;
		DOUBLE ;
		COLOR SCHEME 13
ENDIF


*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є              DOKLAD Setup Code - SECTION 2              є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*

#REGION 1
EXTERNAL ARRAY snz
SET CENT ON

*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є                  DOKLAD Screen Layout                   є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*

#REGION 1
IF WVISIBLE("_05x0xlbbp")
	ACTIVATE WINDOW _05x0xlbbp SAME
ELSE
	ACTIVATE WINDOW _05x0xlbbp NOSHOW
ENDIF
@ 11,1 SAY "Nov  str nka po dokladu:"
@ 15,1 SAY "Imp.datum:"
@ 6,1 SAY "Typ dokladu:"
IF m.cnz>1
@ 6,19 SAY "MШna:"
ENDIF
@ 13,1 SAY "йџtoval:"
@ 4,1 SAY "¬Ўslo od"
@ 4,20 SAY "do"
@ 0,6 SAY alignc(snz(m.cnz)+'  ') ;
	SIZE 1,19 ;
	COLOR SCHEME 14
@ 2,9 GET m.tdto ;
	SIZE 1,10 ;
	DEFAULT {  /  /  } ;
	PICTURE "@D" ;
	VALID _05x0xlbej() ;
	MESSAGE "PGDn - NabЎdka datum…."
@ 2,20 GET m.tdtd ;
	SIZE 1,10 ;
	DEFAULT {  /  /  } ;
	PICTURE "@D" ;
	VALID _05x0xlbev() ;
	MESSAGE "PGDn - NabЎdka datum…."
@ 4,12 GET m.cis_od ;
	SIZE 1,5 ;
	DEFAULT " " ;
	PICTURE "99999"
@ 4,23 GET m.cis_do ;
	SIZE 1,5 ;
	DEFAULT " " ;
	PICTURE "99999" ;
	VALID _05x0xlbf4()
@ 6,14 GET m.ttyp ;
	SIZE 1,3 ;
	DEFAULT 0 ;
	VALID _05x0xlbfa()
IF m.cnz>1
@ 6,25 GET m.mena ;
	SIZE 1,3 ;
	DEFAULT " "
ENDIF
@ 8,1 SAY iif(m.cnz=2,"Vyd no komu:","Pэijato od:") ;
	SIZE 1,12
@ 9,1 GET kli ;
	SIZE 1,25 ;
	DEFAULT " " ;
	WHEN m.cnz>1
@ 11,27 GET m.ff ;
	SIZE 1,3 ;
	DEFAULT " " ;
	PICTURE "@M Ano,Ne" ;
	COLOR SCHEME 4
@ 13,10 GET m.jmuc ;
	SIZE 1,20 ;
	DEFAULT " "
@ 15,12 GET m.imzau ;
	SIZE 1,10 ;
	DEFAULT {  /  /  }
@ 16,24 GET m.ok ;
	PICTURE "@*HT \! OK " ;
	SIZE 1,6,1 ;
	DEFAULT 1 ;
	COLOR SCHEME 14
@ 2,1 SAY "ObdobЎ:"
@ 2,19 SAY "-"

IF NOT WVISIBLE("_05x0xlbbp")
	ACTIVATE WINDOW _05x0xlbbp
ENDIF

READ CYCLE MODAL ;
	VALID _05x0xlbfq() ;
	SHOW _05x0xlbfr()

RELEASE WINDOW _05x0xlbbp
SELECT (m.currarea)


#REGION 0
IF m.talkstat = "ON"
	SET TALK ON
ENDIF
IF m.compstat = "ON"
	SET COMPATIBLE ON
ENDIF


*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є                   DOKLAD Cleanup Code                   є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*

#REGION 1
IF lastkey()=27
	m.esc=.T.
  ELSE
	m.esc=.F.
	ENDIF
SET CENT OFF

*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є _05X0XLBEJ           m.tdto VALID                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Screen:         DOKLAD,     Record Number:   10    є
*       є Variable:            m.tdto                             є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      1                                  є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*
FUNCTION _05x0xlbej     &&  m.tdto VALID
#REGION 1
PRIV p
IF lastkey()=3
	p=ldate(eval("m."+sys(18)),.T.)
	IF m.esc
		RETURN 0
		ENDIF
	m.tdto=p
	SHOW GETS
	RETURN 1
	ENDIF

*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є _05X0XLBEV           m.tdtd VALID                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Screen:         DOKLAD,     Record Number:   11    є
*       є Variable:            m.tdtd                             є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      2                                  є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*
FUNCTION _05x0xlbev     &&  m.tdtd VALID
#REGION 1
PRIV p
IF lastkey()=3
	p=ldate(eval("m."+sys(18)),.F.)
	IF m.esc
		RETURN 0
		ENDIF
	m.tdtd=p
	SHOW GETS
	RETURN 1
	ENDIF

*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є _05X0XLBF4           m.cis_do VALID                     є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Screen:         DOKLAD,     Record Number:   13    є
*       є Variable:            m.cis_do                           є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      3                                  є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*
FUNCTION _05x0xlbf4     &&  m.cis_do VALID
#REGION 1
IF m.cis_od>m.cis_do
	WAIT WIND NOWA "¬Ўslo dokladu tisku 'OD' je vШtзЎ ne§ џЎslo 'DO'."
	ENDIF

*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є _05X0XLBFA           m.ttyp VALID                       є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Screen:         DOKLAD,     Record Number:   14    є
*       є Variable:            m.ttyp                             є
*       є Called By:           VALID Clause                       є
*       є Object Type:         Field                              є
*       є Snippet Number:      4                                  є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*
FUNCTION _05x0xlbfa     &&  m.ttyp VALID
#REGION 1
PRIV _pp,lk
IF lastkey()=3
	_pp=ltyp(denik.typ)
	IF m.esc
		RETURN 0
		ENDIF
	ttyp=_pp
	SHOW GETS
	RETURN 1
	ENDIF
IF SEEK (m.ttyp,'typ')
	RETURN
  ELSE
	WAIT WIND NOWA "Typ dokladu nenalezen"
	RETURN 0
	ENDIF


*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є _05X0XLBFQ           Read Level Valid                   є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Screen:         DOKLAD                             є
*       є Called By:           READ Statement                     є
*       є Snippet Number:      5                                  є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*
FUNCTION _05x0xlbfq     && Read Level Valid
*
* Valid Code from screen: DOKLAD
*
#REGION 1
if lastkey()=27
	m.ok=0
	return
	endif

*       ЪДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДї
*       є                                                         є
*       є _05X0XLBFR           Read Level Show                    є
*       є                                                         є
*       є Function Origin:                                        є
*       є                                                         є
*       є From Screen:         DOKLAD                             є
*       є Called By:           READ Statement                     є
*       є Snippet Number:      6                                  є
*       є                                                         є
*       АДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДЩ
*
FUNCTION _05x0xlbfr     && Read Level Show
PRIVATE currwind
STORE WOUTPUT() TO currwind
*
* Show Code from screen: DOKLAD
*
#REGION 1
IF SYS(2016) = "_05X0XLBBP" OR SYS(2016) = "*"
	ACTIVATE WINDOW _05x0xlbbp SAME
	@ 8,1 SAY iif(m.cnz=2,"Vyd no komu:","Pэijato od:") ;
		SIZE 1,12
ENDIF
IF NOT EMPTY(currwind)
	ACTIVATE WINDOW (currwind) SAME
ENDIF
